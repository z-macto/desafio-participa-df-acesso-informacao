<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>1º Hackathon em Controle Social: Desafio Participa DF</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        main {
            flex: 1;
            overflow-y: auto;
            padding-top: 100px;
        }

        footer {
            background-color: #0d6efd;
            color: white;
            text-align: center;
            padding: 1rem;
        }

        .nav-tabs.navbar-style .nav-link {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            font-weight: 500;
            color: #333;
            border: none;
            border-bottom: 2px solid transparent;
        }

        .nav-tabs.navbar-style .nav-link.active {
            color: #0d6efd;
            border-bottom: 2px solid #0d6efd;
            background-color: transparent;
        }

        .nav-tabs.navbar-style .nav-link i {
            margin-right: 0.4rem;
        }

        /* força os bullets a ficarem verdes */
        .list-green-bullets li {
            list-style-type: disc; /* bolinha padrão */
            color: #198754; /* verde Bootstrap (success) */
        }

        .list-green-bullets li strong {
            color: #000; /* texto em preto, só o bullet fica verde */
        }

        .list-red-bullets li {
            list-style-type: disc;
            color: #dc3545; /* vermelho Bootstrap */
        }

        .list-red-bullets li strong {
            color: #000;
        }

        .bg-orange {
            background-color: #fd7e14 !important; /* tom laranja Bootstrap */
        }


    </style>
</head>
<body class="bg-gradient-to-br from-gray-100 to-gray-50 min-h-screen flex items-center justify-center p-6">

<!-- Cabeçalho -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
    <div class="container-fluid d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center">
            <i class="bi bi-shield-fill-check text-white fs-3 me-2"></i>
            <a class="navbar-brand fw-bold mb-0 h1" href="/">
                1º Hackathon em Controle Social: Desafio Participa DF
            </a>
        </div>
        <div class="d-flex align-items-center">
            <a class="nav-link text-white" href="https://github.com/luandkg" target="_blank">
                <i class="bi bi-github fs-4"></i>
            </a>
        </div>
    </div>
</nav>

<!-- Conteúdo principal -->
<main class="container">
    <!-- Tabs -->
    <ul class="nav nav-tabs navbar-style justify-content-center" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active " id="pedido-tab" data-bs-toggle="tab" data-bs-target="#pedido" type="button"
                    role="tab">
                <i class="bi bi-list-check"></i> Pedido de informação
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link " id="testes-tab" data-bs-toggle="tab" data-bs-target="#testes" type="button"
                    role="tab">
                <i class="bi bi-clipboard-check"></i> Testes
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link " id="dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button"
                    role="tab">
                <i class="bi bi-bar-chart-line"></i> Dashboard
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link " id="documentacao-tab" data-bs-toggle="tab" data-bs-target="#documentacao"
                    type="button" role="tab">
                <i class="bi bi-file-earmark-text"></i> Documentação
            </button>
        </li>
    </ul>

    <!-- Conteúdo das Tabs -->
    <div class="tab-content mt-3" id="myTabContent">

        <!-- Aba Pedido de informação -->
        <div class="tab-pane fade show active" id="pedido" role="tabpanel">
            <h2 class="mb-4">Classificação de Pedidos LAI</h2>

            <!-- Fundo claro com 75% de opacidade -->
            <div >
                <div class="w-full max-w-sm rounded-xl p-6 bg-green/100 backdrop-blur-md border border-green/200  text-white space-y-2">
                    <h2 class="text-lg font-semibold">Público - Seguro</h2>
                    <p class="text-sm opacity-90">Confiança: 100.0%</p>
                    <div class="text-right font-bold text-xl">100%</div>
                </div>
            </div>


            <div class="mb-3">
                <label for="entrada" class="form-label">Digite seu pedido de informação:</label>
                <textarea class="form-control" id="entrada" name="entrada" rows="4"
                          placeholder="Escreva aqui..."></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Solicitar</button>
            </form>
            {% if resposta %}
                <div class="mt-4">
                    <div class="card {% if resposta.Status == 'SIM' %}border-success{% else %}border-danger{% endif %}">
                        <div class="card-header {% if resposta.Status == 'SIM' %}bg-success text-white{% else %}bg-danger text-white{% endif %}">
                            <h5 class="mb-0">
                                {% if resposta.Status == 'SIM' %}
                                    ✅ Pedido aceitável
                                {% else %}
                                    ⚠️ Solicitação de informações pessoais detectada
                                {% endif %}
                            </h5>
                        </div>

                        <div class="card-body">

                            <!-- Nav tabs dentro do card -->
                            <ul class="nav nav-tabs" id="respostaTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="status-tab" data-bs-toggle="tab"
                                            data-bs-target="#status" type="button" role="tab">
                                        Status
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="linhas-tab" data-bs-toggle="tab"
                                            data-bs-target="#linhas" type="button" role="tab">
                                        Análise linha por linha
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="pessoais-tab" data-bs-toggle="tab"
                                            data-bs-target="#pessoais" type="button" role="tab">
                                        Infomações Pessoais
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="motivos-tab" data-bs-toggle="tab"
                                            data-bs-target="#motivos" type="button" role="tab">
                                        Motivos
                                    </button>
                                </li>
                            </ul>

                            <!-- Conteúdo das tabs -->
                            <div class="tab-content mt-3" id="respostaTabContent">

                                <!-- Aba Status -->
                                <div class="tab-pane fade show active" id="status" role="tabpanel">
                                    <div class="max-w-md mx-auto bg-white/20 backdrop-blur-md
            border border-white/30 rounded-xl shadow-lg p-6 text-gray-900">

                                        <h6 class="text-lg font-semibold mb-2">Resumo da análise</h6>

                                        <p><strong>Validação:</strong> {{ resposta.Validacao }}</p>

                                        {% if resposta.Status == 'SIM' %}
                                            <ul class="list-disc list-inside text-green-700 ms-3">
                                        {% else %}
                                            <ul class="list-disc list-inside text-red-700 ms-3">
                                        {% endif %}
                                        <li><strong>Índice:</strong> {{ resposta.Indice }}</li>
                                        <li><strong>Criticidade:</strong> {{ resposta.Criticidade }}</li>
                                        <li><strong>Questionamento:</strong> {{ resposta.Questionamento }}</li>
                                        <li><strong>Pessoalidade:</strong> {{ resposta.Pessoalidade }}</li>
                                        <li><strong>Impessoalidade:</strong> {{ resposta.Impessoalidade }}</li>
                                        </ul>

                                        <p class="mt-3"><strong>Status:</strong> {{ resposta.Status }}</p>
                                    </div>


                                    <!-- Linha do tempo horizontal dinâmica -->
                                    <div class="container my-4"><h5 class="mb-3">Nível de Criticidade</h5>
                                        <div class="d-flex justify-content-between align-items-center position-relative">
                                            <!-- Step 1 -->
                                            <div class="text-center flex-fill">
                                                <div class="rounded-circle mx-auto mb-2 {% if resposta.Indice <= 1 %}bg-success text-white{% else %}bg-secondary text-white{% endif %}"
                                                     style="width:40px; height:40px; line-height:40px;">1
                                                </div>
                                                <small>Não Crítico</small></div>
                                            <div class="flex-fill border-top border-2 border-secondary"></div>
                                            <!-- Step 2 -->
                                            <div class="text-center flex-fill">
                                                <div class="rounded-circle mx-auto mb-2 {% if resposta.Indice > 1 and resposta.Indice <= 3 %}bg-warning text-dark{% else %}bg-secondary text-white{% endif %}"
                                                     style="width:40px; height:40px; line-height:40px;">2
                                                </div>
                                                <small>Crítico Leve</small></div>
                                            <div class="flex-fill border-top border-2 border-secondary"></div>
                                            <!-- Step 3 -->
                                            <div class="text-center flex-fill">
                                                <div class="rounded-circle mx-auto mb-2 {% if resposta.Indice > 3 and resposta.Indice <= 6 %}bg-orange text-white{% else %}bg-secondary text-white{% endif %}"
                                                     style="width:40px; height:40px; line-height:40px;">3
                                                </div>
                                                <small>Crítico Moderado</small></div>
                                            <div class="flex-fill border-top border-2 border-secondary"></div>
                                            <!-- Step 4 -->
                                            <div class="text-center flex-fill">
                                                <div class="rounded-circle mx-auto mb-2 {% if resposta.Indice > 6 %}bg-danger text-white{% else %}bg-secondary text-white{% endif %}"
                                                     style="width:40px; height:40px; line-height:40px;">4
                                                </div>
                                                <small>Crítico Alto</small></div>
                                        </div>
                                    </div>

                                </div>
                                <!-- Aba Linhas -->
                                <div class="tab-pane fade" id="linhas" role="tabpanel">
                                    <h6 class="mt-3 text-lg font-semibold text-gray-800">Detalhes das linhas
                                        analisadas:</h6>

                                    <div class="overflow-x-auto mt-4">
                                        <table class="min-w-full text-sm text-left text-gray-700
                  bg-white/20 backdrop-blur-md border border-gray-200/30 rounded-lg shadow-lg">
                                            <thead class="bg-green-600/40 text-white">
                                            <tr>
                                                <th class="px-4 py-2">Linha</th>
                                                <th class="px-4 py-2">Status</th>
                                                <th class="px-4 py-2">Motivo</th>
                                                <th class="px-4 py-2">Contexto Jurídico</th>
                                                <th class="px-4 py-2">Tem termos proibidos</th>
                                                <th class="px-4 py-2">Termos proibidos</th>
                                                <th class="px-4 py-2">Solicitação</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {% for linha in resposta.Linhas %}
                                                <tr class="{% if linha.status == 'SIM' %}bg-green-100/80{% else %}bg-red-100/80{% endif %} hover:bg-gray-100/40 transition">
                                                    <td class="px-4 py-2">{{ linha.linha }}</td>
                                                    <td class="px-4 py-2">{{ linha.status }}</td>
                                                    <td class="px-4 py-2">{{ linha.motivo or '-' }}</td>
                                                    <td class="px-4 py-2">{{ 'Sim' if linha.contexto_juridico else 'Não' }}</td>
                                                    <td class="px-4 py-2">{{ 'Sim' if linha.tem_termo_proibido else 'Não' }}</td>
                                                    <td class="px-4 py-2">{{ linha.termos_proibidos }}</td>
                                                    <td class="px-4 py-2">{{ linha.solicitacao }}</td>
                                                </tr>
                                            {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Aba Informações Pessoais Detectadas -->
                                <div class="tab-pane fade" id="pessoais" role="tabpanel">
                                    <h6 class="mt-3 text-lg font-semibold text-gray-800">Informações pessoais na
                                        mensagem:</h6>

                                    <div class="bg-white/20 backdrop-blur-md border border-gray-200/30 rounded-lg shadow-md p-4 mt-2">
                                        <p class="font-medium text-gray-900"><strong>Documentos:</strong></p>
                                        <ul class="list-disc list-inside text-gray-800">
                                            {% for m in resposta.Documentos %}
                                                <li>Documento: {{ m }}</li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                </div>


                                <!-- Aba Motivos -->
                                <div class="tab-pane fade" id="motivos" role="tabpanel">
                                    <h6 class="mt-3">Motivos bloqueados:</h6>
                                    {% if resposta.Motivo %}
                                        <p><strong>Motivo principal:</strong> {{ resposta.Motivo }}</p>
                                    {% endif %}
                                    <ul>
                                        {% for m in resposta.Motivo_bloqueou %}
                                            <li>Expressão: {{ m.expressao }} — Termo
                                                inválido: {{ m.termo_invalido }}</li>
                                        {% endfor %}
                                    </ul>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}


        </div>

        <!-- Aba Testes -->
        <div class="tab-pane fade" id="testes" role="tabpanel">
            <h2 class="mb-3">Resultados dos Testes</h2>

            <div class="row">
                {% for resultado in resumo.Resultados %}
                    <div class="col-md-6 mb-4">
                        <div class="card
                {% if resultado.Status == 'SIM' %}border-success{% else %}border-danger{% endif %}">

                            <div class="card-header
                    {% if resultado.Status == 'SIM' %}bg-success text-white{% else %}bg-danger text-white{% endif %}">
                                <h5 class="mb-0">
                                    {% if resultado.Status == 'SIM' %}
                                        ✅ Teste Válido
                                    {% else %}
                                        ⚠️ Teste Inválido
                                    {% endif %}
                                </h5>
                            </div>

                            <div class="card-body">
                                <p><strong>Texto:</strong> {{ resultado.Retorno }}</p>
                                <p><strong>Status:</strong> {{ resultado.Status }}</p>
                                <p><strong>Validação:</strong> {{ resultado.Validacao }}</p>
                                <p><strong>Motivo:</strong> {{ resultado.Motivo or '-' }}</p>

                                <h6 class="mt-3">Linhas analisadas:</h6>
                                <ul class="list-group list-group-flush">
                                    {% for linha in resultado.Linhas %}
                                        <li class="list-group-item
                            {% if linha.status == 'SIM' %}text-success{% else %}text-danger{% endif %}">
                                            <strong>{{ linha.linha }}</strong>
                                            {% if linha.motivo %}
                                                <br><small>Motivo: {{ linha.motivo }}</small>
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>


        <!-- Aba Dashboard -->
        <div class="tab-pane fade" id="dashboard" role="tabpanel">
            <div class="row">
                <div class="col-md-6">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5 class="card-title">Pedidos Válidos</h5>
                            <p class="display-6 text-success">{{ resumo.Validos }}</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5 class="card-title">Pedidos Inválidos</h5>
                            <p class="display-6 text-danger">{{ resumo.Invalidos }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Aba Documentação -->
        <div class="tab-pane fade" id="documentacao" role="tabpanel"><p></p>
            <div class="row"> <!-- Card Amarelo -->
                <div class="col-md-3">
                    <div class="card text-white bg-primary mb-3">
                        <div class="card-header">Índice de Criticidade</div>
                        <div class="card-body"><p class="card-text">Objetivo: mede o nível de risco da mensagem em
                            termos de solicitações de dados pessoais.</p></div>
                    </div>
                </div> <!-- Card Laranja (customizado) -->
                <div class="col-md-3">
                    <div class="card text-white bg-primary mb-3">
                        <div class="card-header">Índice de Questionamento</div>
                        <div class="card-body"><p class="card-text">Objetivo: mede a proporção de linhas que fazem
                            solicitações em relação ao total da mensagem.</p></div>
                    </div>
                </div> <!-- Card Verde -->
                <div class="col-md-3">
                    <div class="card text-white bg-primary mb-3">
                        <div class="card-header">Índice de Pessoalidade</div>
                        <div class="card-body"><p class="card-text">Objetivo: mede a densidade de palavras pessoais em
                            relação ao tamanho da mensagem.</p></div>
                    </div>
                </div> <!-- Card Vermelho -->
                <div class="col-md-3">
                    <div class="card text-white bg-primary mb-3">
                        <div class="card-header">Índice de Impessoalidade</div>
                        <div class="card-body"><p class="card-text">Objetivo: mostra o quanto a mensagem se afasta de
                            dados pessoais, sendo o inverso da Pessoalidade..</p></div>
                    </div>
                </div>


                <!-- Título abaixo dos cards --> <h4 class="mt-4">Índice Geral</h4>
                <p>Índice Final de Criticidade é uma métrica composta destinada à avaliação de mensagens quanto ao risco
                    de exposição de dados pessoais. O cálculo considera múltiplos fatores — número de linhas com
                    solicitações pessoais, quantidade de verbos de solicitação, volume de palavras pessoais, proporção
                    de questionamentos e intensidade de pessoalidade — integrados em uma fórmula multiplicativa
                    ajustada.</p>
                <p>O resultado é interpretado conforme o sinal e magnitude:</p>
                <p>Valores positivos indicam mensagens críticas, com intensidade proporcional ao número e relevância dos
                    dados pessoais solicitados.</p>
                <p>Valores negativos ou iguais a zero indicam mensagens não críticas, representando ausência de risco ou
                    solicitações impessoais.</p>
                <p>Para facilitar a interpretação, o Índice Final é associado a uma escala cromática:</p>

                <!-- Cards empilhados (um abaixo do outro) -->
                <div class="card text-black bg-success mb-3">
                    <div class="card-header bg-success">Verde (≤0): Não Crítico</div>
                    <div class="card-body"><p class="card-text"> Mensagens classificadas em verde representam ausência
                        de criticidade. São comunicações seguras, que não solicitam dados pessoais ou que contêm apenas
                        informações impessoais. Esse nível indica baixo risco e não requer medidas adicionais de
                        proteção.</p></div>
                </div>
                <div class="card text-black bg-warning mb-3">
                    <div class="card-header bg-warning">Amarelo (1–3): Crítico leve</div>
                    <div class="card-body"><p class="card-text">Mensagens em amarelo indicam criticidade leve, ou seja,
                        há solicitação de dados pessoais, mas em quantidade reduzida ou com baixa relevância. Esse nível
                        funciona como um alerta inicial, sugerindo atenção, mas sem caracterizar risco elevado.</p>
                    </div>
                </div>
                <div class="card text-black bg-orange mb-3">
                    <div class="card-header bg-orange">Laranja (4–6): Crítico moderado</div>
                    <div class="card-body"><p class="card-text">Mensagens em laranja representam criticidade moderada.
                        Nelas, há solicitações de múltiplos dados pessoais ou informações sensíveis em intensidade
                        significativa. Esse nível exige maior cuidado, pois já há risco relevante de exposição.</p>
                    </div>
                </div>
                <div class="card text-black bg-danger mb-3">
                    <div class="card-header bg-danger">Vermelho (>6): Crítico alto</div>
                    <div class="card-body"><p class="card-text">Mensagens em vermelho correspondem a criticidade alta,
                        caracterizada por solicitações de diversos dados pessoais sensíveis (como CPF, RG, endereço,
                        telefone, e-mail, data de nascimento). Esse nível indica risco elevado e demanda ação imediata
                        para proteção das informações.</p></div>
                </div>


            </div>
        </div>

    </div>
</main>

<!-- Rodapé -->
<footer>
    Projeto HCS-DPDF v1.0
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>