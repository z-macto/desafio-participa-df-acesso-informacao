<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>1º Hackathon em Controle Social: Desafio Participa DF</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        main {
            flex: 1;
            overflow-y: auto;
            padding-top: 100px;
        }

        footer {
            background-color: #0d6efd;
            color: white;
            text-align: center;
            padding: 1rem;
        }

        .nav-tabs.navbar-style .nav-link {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            font-weight: 500;
            color: #333;
            border: none;
            border-bottom: 2px solid transparent;
        }

        .nav-tabs.navbar-style .nav-link.active {
            color: #0d6efd;
            border-bottom: 2px solid #0d6efd;
            background-color: transparent;
        }

        .nav-tabs.navbar-style .nav-link i {
            margin-right: 0.4rem;
        }

        /* força os bullets a ficarem verdes */
        .list-green-bullets li {
            list-style-type: disc; /* bolinha padrão */
            color: #198754; /* verde Bootstrap (success) */
        }

        .list-green-bullets li strong {
            color: #000; /* texto em preto, só o bullet fica verde */
        }

        .list-red-bullets li {
            list-style-type: disc;
            color: #dc3545; /* vermelho Bootstrap */
        }

        .list-red-bullets li strong {
            color: #000;
        }

        .table-success-translucid {
            background-color: rgba(25, 135, 84, 0.2); /* verde Bootstrap com 20% opacidade */
        }

        .table-danger-translucid {
            background-color: rgba(220, 53, 69, 0.2); /* vermelho Bootstrap com 20% opacidade */
        }

    </style>
</head>
<body class="bg-light">

<!-- Cabeçalho -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
    <div class="container-fluid d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center">
            <i class="bi bi-shield-fill-check text-white fs-3 me-2"></i>
            <a class="navbar-brand fw-bold mb-0 h1" href="/">
                1º Hackathon em Controle Social: Desafio Participa DF
            </a>
        </div>
        <div class="d-flex align-items-center">
            <a class="nav-link text-white" href="https://github.com/luandkg" target="_blank">
                <i class="bi bi-github fs-4"></i>
            </a>
        </div>
    </div>
</nav>

<!-- Conteúdo principal -->
<main class="container">
    <!-- Tabs -->
    <ul class="nav nav-tabs navbar-style justify-content-center" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="pedido-tab" data-bs-toggle="tab" data-bs-target="#pedido" type="button"
                    role="tab">
                <i class="bi bi-list-check"></i> Pedido de informação
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="testes-tab" data-bs-toggle="tab" data-bs-target="#testes" type="button"
                    role="tab">
                <i class="bi bi-clipboard-check"></i> Testes
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button"
                    role="tab">
                <i class="bi bi-bar-chart-line"></i> Dashboard
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="documentacao-tab" data-bs-toggle="tab" data-bs-target="#documentacao"
                    type="button" role="tab">
                <i class="bi bi-file-earmark-text"></i> Documentação
            </button>
        </li>
    </ul>

    <!-- Conteúdo das Tabs -->
    <div class="tab-content mt-3" id="myTabContent">

        <!-- Aba Pedido de informação -->
        <div class="tab-pane fade show active" id="pedido" role="tabpanel">
            <h2 class="mb-4">Classificação de Pedidos LAI</h2>
            <form method="POST" action="/">
                <div class="mb-3">
                    <label for="entrada" class="form-label">Digite seu pedido de informação:</label>
                    <textarea class="form-control" id="entrada" name="entrada" rows="4"
                              placeholder="Escreva aqui..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Solicitar</button>
            </form>

            {% if resposta %}
                <div class="mt-4">
                    <div class="card {% if resposta.Status == 'SIM' %}border-success{% else %}border-danger{% endif %}">
                        <div class="card-header {% if resposta.Status == 'SIM' %}bg-success text-white{% else %}bg-danger text-white{% endif %}">
                            <h5 class="mb-0"> {% if resposta.Status == 'SIM' %} ✅ Pedido aceitável {% else %} ⚠️
                                Solicitação de informações pessoais detectada {% endif %} </h5></div>
                        <div class="card-body"><h6 class="card-title">Resumo da análise</h6>
                            <p><strong>Validação:</strong> {{ resposta.Validacao }}</p>
                            {% if resposta.Status == 'SIM' %}
                                <ul class="list-green-bullets ms-3">
                            {% else %}
                                <ul class="list-red-bullets ms-3">
                            {% endif %}
                            <li><strong>Índice:</strong> {{ resposta.Indice }}</li>
                            <li><strong>Criticidade:</strong> {{ resposta.Criticidade }}</li>
                            <li><strong>Questionamento:</strong> {{ resposta.Questionamento }}</li>
                            <li><strong>Pessoalidade:</strong> {{ resposta.Pessoalidade }}</li>
                            <li><strong>Impessoalidade:</strong> {{ resposta.Impessoalidade }}</li>
                            </ul>
                            <p><strong>Status:</strong> {{ resposta.Status }}</p> {% if resposta.Motivo %}
                                <p><strong>Motivo:</strong> {{ resposta.Motivo }}</p> {% endif %} <h6 class="mt-3">
                                Detalhes das linhas analisadas:</h6>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover align-middle">
                                    <thead class="table-primary">
                                    <tr>
                                        <th>Linha</th>
                                        <th>Status</th>
                                        <th>Motivo</th>
                                        <th>Contexto Jurídico</th>
                                    </tr>
                                    </thead>
                                    <tbody> {% for linha in resposta.Linhas %}
                                        <tr class="{% if linha.status == 'SIM' %}table-success{% else %}table-danger{% endif %}">
                                            <td>{{ linha.linha }}</td>
                                            <td>{{ linha.status }}</td>
                                            <td>{{ linha.motivo or '-' }}</td>
                                            <td>{{ 'Sim' if linha.contexto_juridico else 'Não' }}</td>
                                        </tr> {% endfor %} </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div> {% endif %} </div>


    </div>

    <!-- Aba Testes -->
    <div class="tab-pane fade" id="testes" role="tabpanel">
        <h2 class="mb-3">Resultados dos Testes</h2>

        <div class="row">
            {% for resultado in resumo.Resultados %}
                <div class="col-md-6 mb-4">
                    <div class="card
                {% if resultado.Status == 'SIM' %}border-success{% else %}border-danger{% endif %}">

                        <div class="card-header
                    {% if resultado.Status == 'SIM' %}bg-success text-white{% else %}bg-danger text-white{% endif %}">
                            <h5 class="mb-0">
                                {% if resultado.Status == 'SIM' %}
                                    ✅ Teste Válido
                                {% else %}
                                    ⚠️ Teste Inválido
                                {% endif %}
                            </h5>
                        </div>

                        <div class="card-body">
                            <p><strong>Texto:</strong> {{ resultado.Retorno }}</p>
                            <p><strong>Status:</strong> {{ resultado.Status }}</p>
                            <p><strong>Validação:</strong> {{ resultado.Validacao }}</p>
                            <p><strong>Motivo:</strong> {{ resultado.Motivo or '-' }}</p>

                            <h6 class="mt-3">Linhas analisadas:</h6>
                            <ul class="list-group list-group-flush">
                                {% for linha in resultado.Linhas %}
                                    <li class="list-group-item
                            {% if linha.status == 'SIM' %}text-success{% else %}text-danger{% endif %}">
                                        <strong>{{ linha.linha }}</strong>
                                        {% if linha.motivo %}
                                            <br><small>Motivo: {{ linha.motivo }}</small>
                                        {% endif %}
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>


    <!-- Aba Dashboard -->
    <div class="tab-pane fade" id="dashboard" role="tabpanel">
        <div class="row">
            <div class="col-md-6">
                <div class="card text-center">
                    <div class="card-body">
                        <h5 class="card-title">Pedidos Válidos</h5>
                        <p class="display-6 text-success">{{ resumo.Validos }}</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card text-center">
                    <div class="card-body">
                        <h5 class="card-title">Pedidos Inválidos</h5>
                        <p class="display-6 text-danger">{{ resumo.Invalidos }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Aba Documentação -->
    <div class="tab-pane fade" id="documentacao" role="tabpanel">
        <p>Este módulo identifica automaticamente dados pessoais em pedidos de acesso à informação com base em regras
            jurídicas e linguísticas. Use esta seção para entender como o sistema funciona, quais parâmetros são
            utilizados e como interpretar os resultados.</p>
    </div>
    </div>
</main>

<!-- Rodapé -->
<footer>
    Projeto HCS-DPDF v1.0
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>